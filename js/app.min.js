var _0x2d14=["push","apply","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","configurable","value","writable","key","prototype","bloomEffect","innerWidth","innerHeight","bloomThreshold","strength","bloomStrength","composer","addPass","Shape","moveTo","lineTo","quadraticCurveTo","flatRoundedRectangle","height","rotateX","createElement","canvas","style","getContext","setTransform","bitmap","colors","beginPath","rect","fill","font","bold ","fontSize","fillStyle","color","middle","textAlign","center","fillText","Texture","minFilter","LinearFilter","uniform","MeshLambertMaterial","Tekstura","uniformDispose","map","dispose","#404040","#eee4da","#ede0c8","#f2b179","#f9f6f2","#f59563","#f67c5f","#f65e3b","#edcf72","#edcc61","#edc850","#3c3a32","rowToString","concat","removeEmptyValues","mergeBricks","isMerged","points","merged","reduce","reverse","fillWithEmptyValues","board","right","rotate","down","emptyCells","random","create","bricks","flat","isGameOver","isFull","hasPair","equal","updateCoordinates","removeOldBrick","addRandomBrick","uniqueId","oldBrick","createEmpty","merge","removed","toString","brickViews","group","Board","make","add","makeBoardBase","makeCells","Mesh","position","castShadow","name","Board base","Geometry","clone","receiveShadow","Cells","update","updateBrick","addBrick","textures","appearEffect","remove","elem","oldX","oldY","mergeEffect","get","scale","call","Tween","material","cubicInOut","brick-","Floor","PIXEL_RATIO","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","texture","SpriteMaterial","set","width","26px 'Press Start 2P'","#808080","textBaseline","needsUpdate","scene","Scene","background","Color","objects","setCamera","renderer","createLights","addEventListener","onWindowResize","addObject","setPixelRatio","shadowMap","enabled","type","shadowMapSoft","gammaInput","gammaOutput","gammaFactor","shadowMapDarkness","shadowMapHeight","EffectComposer","RenderPass","camera","body","appendChild","domElement","antialiasing","ShaderPass","FXAAShader","getPixelRatio","uniforms","resolution","render","animate","PerspectiveCamera","updateProjectionMatrix","lookAt","Vector3","fov","far","CameraHelper","ambientLight","lightDir","DirectionalLight","target","shadowDarkness","shadowCameraVisible","shadow","left","top","bottom","near","DirectionalLightHelper","light","SpotLight","bias","mapSize","HemisphereLight","addFog","fog","FogExp2","postprocessing","SMAAPass","postprocessingSsaa","SSAARenderPass","CopyShader","ssao","minDistance","aspect","setSize","radius","bloomRadius","controls","orbitControls","OrbitControls","stats","showPanel","preloadTextures","renderStats","RendererStats","absolute","viewManager","score","keydown","keyCode","removeOldBricks","GAME OVER","onload","THREE","init","keys"];!function(e,x){!function(x){for(;--x;)e.push(e.shift())}(++x)}(_0x2d14,243);var _0xeeeb=function(e,x){return _0x2d14[e-=0]};function ownKeys(e,x){var b=Object[_0xeeeb("0x0")](e);return Object.getOwnPropertySymbols&&b[_0xeeeb("0x1")][_0xeeeb("0x2")](b,Object[_0xeeeb("0x3")](e)),x&&(b=b[_0xeeeb("0x4")](function(x){return Object[_0xeeeb("0x5")](e,x)[_0xeeeb("0x6")]})),b}function _objectSpread(e){for(var x=1;x<arguments[_0xeeeb("0x7")];x++){var b=null!=arguments[x]?arguments[x]:{};x%2?ownKeys(b,!0)[_0xeeeb("0x8")](function(x){_defineProperty(e,x,b[x])}):Object[_0xeeeb("0x9")]?Object[_0xeeeb("0xa")](e,Object[_0xeeeb("0x9")](b)):ownKeys(b)[_0xeeeb("0x8")](function(x){Object.defineProperty(e,x,Object[_0xeeeb("0x5")](b,x))})}return e}function _defineProperty(e,x,b){return x in e?Object[_0xeeeb("0xb")](e,x,{value:b,enumerable:!0,configurable:!0,writable:!0}):e[x]=b,e}function _classCallCheck(e,x){if(!(e instanceof x))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,x){for(var b=0;b<x[_0xeeeb("0x7")];b++){var t=x[b];t.enumerable=t[_0xeeeb("0x6")]||!1,t[_0xeeeb("0xc")]=!0,_0xeeeb("0xd")in t&&(t[_0xeeeb("0xe")]=!0),Object[_0xeeeb("0xb")](e,t[_0xeeeb("0xf")],t)}}function _createClass(e,x,b){return x&&_defineProperties(e[_0xeeeb("0x10")],x),b&&_defineProperties(e,b),e}var Utils=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:_0xeeeb("0x11"),value:function(){var e={exposure:1,bloomStrength:1.5,bloomThreshold:0,bloomRadius:0},x=new THREE.UnrealBloomPass(new THREE.Vector2(window[_0xeeeb("0x12")],window[_0xeeeb("0x13")]),1.5,.4,.85);x.threshold=e[_0xeeeb("0x14")],x[_0xeeeb("0x15")]=e[_0xeeeb("0x16")],x.radius=e.bloomRadius,this[_0xeeeb("0x17")][_0xeeeb("0x18")](x)}}],[{key:"flatRoundedRectangle",value:function(){var e,x,b,t=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments[_0xeeeb("0x7")]>1&&void 0!==arguments[1]?arguments[1]:50,_=new(THREE[_0xeeeb("0x19")]);return x=t,b=i,(e=_)[_0xeeeb("0x1a")](0,5),e[_0xeeeb("0x1b")](0,0+b-5),e[_0xeeeb("0x1c")](0,0+b,5,0+b),e[_0xeeeb("0x1b")](0+x-5,0+i),e[_0xeeeb("0x1c")](0+x,0+b,0+x,0+b-5),e[_0xeeeb("0x1b")](0+x,5),e.quadraticCurveTo(0+x,0,0+x-5,0),e[_0xeeeb("0x1b")](5,0),e.quadraticCurveTo(0,0,0,5),_}},{key:"roundedBoxGeometry",value:function(e){var x=_objectSpread({},{depth:15,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:0,bevelThickness:0,height:50,width:50},{},e);return new THREE.ExtrudeGeometry(this[_0xeeeb("0x1d")](x.width,x[_0xeeeb("0x1e")]),x)[_0xeeeb("0x1f")](Math.PI/2)}},{key:"bitmap",value:function(e,x){var b=document[_0xeeeb("0x20")](_0xeeeb("0x21"));return b.width=e,b.height=x,b[_0xeeeb("0x22")].width=e+"px",b[_0xeeeb("0x22")][_0xeeeb("0x1e")]=x+"px",b[_0xeeeb("0x23")]("2d")[_0xeeeb("0x24")](1,0,0,1,0,0),b}},{key:"texture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2",x=this[_0xeeeb("0x25")](60,60),b=x[_0xeeeb("0x23")]("2d"),t=this[_0xeeeb("0x26")](e);b[_0xeeeb("0x27")](),b[_0xeeeb("0x28")](0,0,60,60),b.fillStyle=t.bg,b[_0xeeeb("0x29")](),b[_0xeeeb("0x2a")]=_0xeeeb("0x2b")+t[_0xeeeb("0x2c")]+"px arial",b[_0xeeeb("0x2d")]=t[_0xeeeb("0x2e")],b.textBaseline=_0xeeeb("0x2f"),b[_0xeeeb("0x30")]=_0xeeeb("0x31"),b[_0xeeeb("0x32")](e,x.width/2,x[_0xeeeb("0x1e")]/2);var i=new(THREE[_0xeeeb("0x33")])(x);return i.needsUpdate=!0,i[_0xeeeb("0x34")]=THREE[_0xeeeb("0x35")],i}},{key:_0xeeeb("0x36"),value:function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]?arguments[0]:2,x=new THREE.MeshLambertMaterial({color:this.colors(e).bg});return[x,x,new(THREE[_0xeeeb("0x37")])({map:this.texture(e),name:_0xeeeb("0x38")}),x,x,x]}},{key:_0xeeeb("0x39"),value:function(e){e[_0xeeeb("0x8")](function(e){null!==e[_0xeeeb("0x3a")]&&e.map[_0xeeeb("0x3b")](),e[_0xeeeb("0x3b")]()})}},{key:_0xeeeb("0x26"),value:function(e){var x=_0xeeeb("0x3c"),b=_0xeeeb("0x3d"),t="40";switch(e){case 4:b=_0xeeeb("0x3e");break;case 8:b=_0xeeeb("0x3f"),x=_0xeeeb("0x40");break;case 16:b=_0xeeeb("0x41"),x=_0xeeeb("0x40");break;case 32:b=_0xeeeb("0x42"),x="#f9f6f2";break;case 64:b=_0xeeeb("0x43"),x=_0xeeeb("0x40");break;case 128:b=_0xeeeb("0x44"),x=_0xeeeb("0x40"),t="26";break;case 256:b=_0xeeeb("0x45"),x=_0xeeeb("0x40"),t="26";break;case 512:b=_0xeeeb("0x46"),x=_0xeeeb("0x40"),t="26";break;case 1024:b="#edc53f",x=_0xeeeb("0x40"),t="26";break;case 2048:b="#edc22e",x=_0xeeeb("0x40"),t="26";break;case 4096:b=_0xeeeb("0x47"),x=_0xeeeb("0x40"),t="26"}return{bg:b,color:x,fontSize:t}}}]),e}(),Board=function(){function e(){var x=this;_classCallCheck(this,e),_defineProperty(this,_0xeeeb("0x48"),function(e){return e.map(function(e){return e[_0xeeeb("0xd")]}).join()}),_defineProperty(this,"fillWithEmptyValues",function(e){return e[_0xeeeb("0x49")](Array(4-e[_0xeeeb("0x7")])[_0xeeeb("0x29")](0)[_0xeeeb("0x3a")](function(e){return Brick.createEmpty(0,0)}))}),_defineProperty(this,_0xeeeb("0x4a"),function(e){return e.filter(function(e){return e[_0xeeeb("0xd")]})}),_defineProperty(this,_0xeeeb("0x4b"),function(e){for(var b=0;b<e[_0xeeeb("0x7")]-1;b++)e[b+1]=e[b].merge(e[b+1]),e[b][_0xeeeb("0x4c")]()&&(x[_0xeeeb("0x4d")]+=e[b][_0xeeeb("0xd")]);return e}),_defineProperty(this,"rowValues",function(e){return e[_0xeeeb("0x3a")](function(e){return e[_0xeeeb("0xd")]})}),this.board=[4,4,4,4][_0xeeeb("0x3a")](function(e,x){return Array(4)[_0xeeeb("0x29")]()[_0xeeeb("0x3a")](function(e,b){return Brick.createEmpty(b,x)})}),this[_0xeeeb("0x4e")]=!1,this[_0xeeeb("0x4d")]=0}return _createClass(e,[{key:_0xeeeb("0x4f"),value:function(e){var x=arguments[_0xeeeb("0x7")]>1&&void 0!==arguments[1]&&arguments[1],b=this.rowToString(e);return e=x?e[_0xeeeb("0x50")]():e,e=this[_0xeeeb("0x4a")](e),e=this[_0xeeeb("0x4b")](e),e=this[_0xeeeb("0x4a")](e),e=this[_0xeeeb("0x51")](e),e=x?e[_0xeeeb("0x50")]():e,this[_0xeeeb("0x48")](e)!==b&&(this[_0xeeeb("0x4e")]=!0),e}},{key:"left",value:function(){var e=this;this[_0xeeeb("0x52")]=this.board[_0xeeeb("0x3a")](function(x){return e[_0xeeeb("0x4f")](x)})}},{key:_0xeeeb("0x53"),value:function(){var e=this;this[_0xeeeb("0x52")]=this[_0xeeeb("0x52")][_0xeeeb("0x3a")](function(x){return e[_0xeeeb("0x4f")](x,!0)})}},{key:"up",value:function(){var e=this;this.board=this[_0xeeeb("0x52")][_0xeeeb("0x54")]()[_0xeeeb("0x3a")](function(x){return e[_0xeeeb("0x4f")](x)})[_0xeeeb("0x54")]()}},{key:_0xeeeb("0x55"),value:function(){var e=this;this[_0xeeeb("0x52")]=this.board[_0xeeeb("0x54")]().map(function(x){return e[_0xeeeb("0x4f")](x,!0)})[_0xeeeb("0x54")]()}},{key:"addBrick",value:function(){return this[_0xeeeb("0x4e")]?(this.addRandomBrick(),this[_0xeeeb("0x4e")]=!1,this):this}},{key:"addRandomBrick",value:function(){var e=this[_0xeeeb("0x56")]()[_0xeeeb("0x57")](),x=e.x,b=e.y;return this.board[b][x]=Brick[_0xeeeb("0x58")](x,b,2),this}},{key:_0xeeeb("0x59"),value:function(){return this[_0xeeeb("0x52")][_0xeeeb("0x5a")]()[_0xeeeb("0x4")](function(e){return e[_0xeeeb("0xd")]})}},{key:_0xeeeb("0x56"),value:function(){return this.board[_0xeeeb("0x5a")]()[_0xeeeb("0x4")](function(e){return!e[_0xeeeb("0xd")]})}},{key:_0xeeeb("0x5b"),value:function(){return this[_0xeeeb("0x5c")]()&&!this[_0xeeeb("0x5d")]()}},{key:_0xeeeb("0x5d"),value:function(){for(var e=0;e<4;e++)for(var x=0;x<4;x++){var b=this[_0xeeeb("0x52")][e][x][_0xeeeb("0x5e")](this[_0xeeeb("0x52")][e][x+1]),t=this.board[e][x][_0xeeeb("0x5e")](this.board[e+1][x]);if(b||t)return!0}return!1}},{key:"isFull",value:function(){return!this[_0xeeeb("0x56")]()[_0xeeeb("0x7")]}},{key:_0xeeeb("0x5f"),value:function(){this.board[_0xeeeb("0x3a")](function(e,x){return e.map(function(e,b){e.x=b,e.y=x})})}},{key:"removeOldBricks",value:function(){this[_0xeeeb("0x52")][_0xeeeb("0x5a")]()[_0xeeeb("0x3a")](function(e){return e[_0xeeeb("0x60")]()})}}],[{key:_0xeeeb("0x58"),value:function(){return(new e)[_0xeeeb("0x61")]()[_0xeeeb("0x61")]()}}]),e}();function Brick(e,x){var b=arguments[_0xeeeb("0x7")]>2&&void 0!==arguments[2]?arguments[2]:0;this.id=this[_0xeeeb("0x62")](),this.x=e,this.y=x,this[_0xeeeb("0xd")]=b,this[_0xeeeb("0x63")]=!1,this.removed=!1}function Score(){this[_0xeeeb("0xd")]=0}function BoardView(){this[_0xeeeb("0x68")]=[],this.group=new THREE.Group,this[_0xeeeb("0x69")].name=_0xeeeb("0x6a")}Array[_0xeeeb("0x10")][_0xeeeb("0x54")]=function(){var e=this;return this[0][_0xeeeb("0x3a")](function(x,b){return e.map(function(e){return e[b]})})},Array[_0xeeeb("0x10")][_0xeeeb("0x57")]=function(){return this[Math.floor(Math[_0xeeeb("0x57")]()*this[_0xeeeb("0x7")])]},Brick[_0xeeeb("0x64")]=function(e,x){return new Brick(e,x)},Brick[_0xeeeb("0x58")]=function(e,x,b){return new Brick(e,x,b)},Brick[_0xeeeb("0x10")][_0xeeeb("0x65")]=function(e){return this.equal(e)?(this.value+=e.value,e[_0xeeeb("0x66")]=!0,this[_0xeeeb("0x63")]=e,Brick[_0xeeeb("0x64")](0,0)):e},Brick.prototype[_0xeeeb("0x5e")]=function(e){return this[_0xeeeb("0xd")]===e[_0xeeeb("0xd")]},Brick[_0xeeeb("0x10")][_0xeeeb("0x60")]=function(){this.oldBrick=!1},Brick[_0xeeeb("0x10")][_0xeeeb("0x4c")]=function(){return!!this[_0xeeeb("0x63")]},Brick.prototype.uniqueId=function(){return"_"+Math[_0xeeeb("0x57")]()[_0xeeeb("0x67")](36).substr(2,9)},Score[_0xeeeb("0x10")][_0xeeeb("0xd")]=function(){return this[_0xeeeb("0xd")]},Score[_0xeeeb("0x10")].add=function(e){this[_0xeeeb("0xd")]+=e},BoardView[_0xeeeb("0x10")].get=function(){return this[_0xeeeb("0x6b")](),this[_0xeeeb("0x69")]},BoardView[_0xeeeb("0x10")][_0xeeeb("0x6b")]=function(){this[_0xeeeb("0x69")][_0xeeeb("0x6c")](this[_0xeeeb("0x6d")]()),this[_0xeeeb("0x69")].add(this[_0xeeeb("0x6e")]())},BoardView.prototype.makeBoardBase=function(){var e=new THREE.BoxGeometry(250,10,250),x=new(THREE[_0xeeeb("0x37")])({color:12299680}),b=new(THREE[_0xeeeb("0x6f")])(e,x);return b[_0xeeeb("0x70")].y=11,b[_0xeeeb("0x71")]=!0,b.receiveShadow=!0,b[_0xeeeb("0x72")]=_0xeeeb("0x73"),b},BoardView[_0xeeeb("0x10")][_0xeeeb("0x6e")]=function(){for(var e=new THREE.BoxGeometry(50,2,50),x=new(THREE[_0xeeeb("0x6f")])(e),b=new(THREE[_0xeeeb("0x74")]),t=0;t<4;t++)for(var i=0;i<4;i++){var _=x[_0xeeeb("0x75")]();_.position.x=60*t-90,_.position.z=60*i-90,_[_0xeeeb("0x70")].y=17,THREE.GeometryUtils[_0xeeeb("0x65")](b,_)}var n=new THREE.MeshLambertMaterial({color:"#cdc1b4"}),r=new(THREE[_0xeeeb("0x6f")])(b,n);return r[_0xeeeb("0x71")]=!0,r[_0xeeeb("0x76")]=!0,r[_0xeeeb("0x72")]=_0xeeeb("0x77"),r},BoardView[_0xeeeb("0x10")][_0xeeeb("0x78")]=function(e){var x=this;e[_0xeeeb("0x8")](function(e){x[_0xeeeb("0x79")](e),x[_0xeeeb("0x7a")](e),x[_0xeeeb("0x60")](e)})},BoardView[_0xeeeb("0x10")][_0xeeeb("0x79")]=function(e){this[_0xeeeb("0x68")][e.id]&&this[_0xeeeb("0x68")][e.id][_0xeeeb("0x78")](e)},BoardView.prototype[_0xeeeb("0x7a")]=function(e){this[_0xeeeb("0x68")][e.id]||(this.brickViews[e.id]=BrickView[_0xeeeb("0x58")](e,this[_0xeeeb("0x7b")]),this[_0xeeeb("0x69")][_0xeeeb("0x6c")](this[_0xeeeb("0x68")][e.id].elem),setTimeout(this[_0xeeeb("0x68")][e.id][_0xeeeb("0x7c")](),100))},BoardView.prototype.removeOldBrick=function(e){e[_0xeeeb("0x4c")]()&&(this[_0xeeeb("0x69")][_0xeeeb("0x7d")](this.brickViews[e[_0xeeeb("0x63")].id][_0xeeeb("0x7e")]),delete this.brickViews[e[_0xeeeb("0x63")].id])},BoardView.prototype.winAnimation=function(){};var BrickView=function(){function e(){var x=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,e),this[_0xeeeb("0x7e")]=x,this[_0xeeeb("0x7f")]=!1,this[_0xeeeb("0x80")]=!1}return _createClass(e,[{key:_0xeeeb("0x81"),value:function(){var e=this;this.elem.scale.set(.5,.5,.5),createjs.Tween[_0xeeeb("0x82")](this.elem[_0xeeeb("0x83")]).to({x:1.1,y:1.1,z:1.1},100)[_0xeeeb("0x84")](function(){createjs[_0xeeeb("0x85")].get(e[_0xeeeb("0x7e")].scale).to({x:1,y:1,z:1},100)})}},{key:"appearEffect",value:function(){createjs[_0xeeeb("0x85")][_0xeeeb("0x82")](this.elem[_0xeeeb("0x83")]).to({x:1,y:1,z:1},200)}},{key:_0xeeeb("0x78"),value:function(e){this[_0xeeeb("0x39")](this[_0xeeeb("0x7e")][_0xeeeb("0x86")]),this.elem.material=Utils[_0xeeeb("0x36")](e[_0xeeeb("0xd")]),this.oldX=this[_0xeeeb("0x7e")][_0xeeeb("0x70")].x,this[_0xeeeb("0x80")]=this.elem[_0xeeeb("0x70")].z;var x=60*e.x-90,b=60*e.y-90;createjs[_0xeeeb("0x85")].get(this[_0xeeeb("0x7e")].position).to({x:x},100,createjs.Tween[_0xeeeb("0x87")]),createjs[_0xeeeb("0x85")].get(this.elem[_0xeeeb("0x70")]).to({z:b},100,createjs[_0xeeeb("0x85")][_0xeeeb("0x87")]),e.isMerged()&&this[_0xeeeb("0x81")]()}},{key:_0xeeeb("0x7d"),value:function(){this[_0xeeeb("0x7e")].geometry[_0xeeeb("0x3b")](),this[_0xeeeb("0x39")](this[_0xeeeb("0x7e")][_0xeeeb("0x86")])}},{key:_0xeeeb("0x39"),value:function(e){e.forEach(function(e){null!==e[_0xeeeb("0x3a")]&&e[_0xeeeb("0x3a")][_0xeeeb("0x3b")](),e[_0xeeeb("0x3b")]()})}},{key:"get",get:function(){return this[_0xeeeb("0x7e")]}}],[{key:_0xeeeb("0x58"),value:function(x,b){var t=new THREE.BoxBufferGeometry(50,15,50),i=Utils[_0xeeeb("0x36")](x[_0xeeeb("0xd")]),_=new(THREE[_0xeeeb("0x6f")])(t,i);return _.castShadow=!0,_[_0xeeeb("0x76")]=!0,_.position.x=60*x.x-90,_.position.z=60*x.y-90,_[_0xeeeb("0x70")].y=25,_[_0xeeeb("0x72")]=_0xeeeb("0x88")+x.id,_.userData={oldX:_.position.x,oldY:_[_0xeeeb("0x70")].z},_[_0xeeeb("0x83")].set(.5,.5,.5),new e(_)}}]),e}();THREE=THREE||{};var FloorView=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:_0xeeeb("0x82"),value:function(){var e=new THREE.BoxBufferGeometry(500,1,500),x=new THREE.MeshLambertMaterial({color:13553358}),b=new(THREE[_0xeeeb("0x6f")])(e,x);return b[_0xeeeb("0x76")]=!0,b[_0xeeeb("0x71")]=!1,b[_0xeeeb("0x72")]=_0xeeeb("0x89"),b}}]),e}();function ScoreView(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]?arguments[0]:null;this[_0xeeeb("0x7e")]=e}ScoreView[_0xeeeb("0x8a")]=function(){var e=document[_0xeeeb("0x20")]("canvas").getContext("2d");return(window[_0xeeeb("0x8b")]||1)/(e[_0xeeeb("0x8c")]||e[_0xeeeb("0x8d")]||e[_0xeeeb("0x8e")]||e[_0xeeeb("0x8f")]||e[_0xeeeb("0x90")]||1)}(),ScoreView[_0xeeeb("0x58")]=function(e){var x=ScoreView[_0xeeeb("0x91")](e[_0xeeeb("0xd")]),b=new(THREE[_0xeeeb("0x92")])({map:x}),t=new THREE.Sprite(b);return t[_0xeeeb("0x83")][_0xeeeb("0x93")](100,100,100),t[_0xeeeb("0x70")].x=10,t.position.y=200,t[_0xeeeb("0x72")]="Score",new ScoreView(t)},ScoreView[_0xeeeb("0x10")][_0xeeeb("0x78")]=function(e){this[_0xeeeb("0x7e")].material=ScoreView[_0xeeeb("0x91")](e[_0xeeeb("0xd")])},ScoreView[_0xeeeb("0x25")]=function(e,x){var b=arguments[_0xeeeb("0x7")]>2&&void 0!==arguments[2]?arguments[2]:ScoreView[_0xeeeb("0x8a")],t=document[_0xeeeb("0x20")](_0xeeeb("0x21"));return t[_0xeeeb("0x94")]=e*b,t[_0xeeeb("0x1e")]=x*b,t.style[_0xeeeb("0x94")]=e+"px",t.style.height=x+"px",t[_0xeeeb("0x23")]("2d")[_0xeeeb("0x24")](b,0,0,b,0,0),t},ScoreView[_0xeeeb("0x91")]=function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]?arguments[0]:"2",x=ScoreView[_0xeeeb("0x25")](100,100),b=x[_0xeeeb("0x23")]("2d");b[_0xeeeb("0x27")](),b[_0xeeeb("0x28")](0,0,100,100),b[_0xeeeb("0x2a")]=_0xeeeb("0x95"),b[_0xeeeb("0x2d")]=_0xeeeb("0x96"),b[_0xeeeb("0x97")]=_0xeeeb("0x2f"),b.textAlign=_0xeeeb("0x31"),b[_0xeeeb("0x32")](e,x[_0xeeeb("0x94")]/2,x[_0xeeeb("0x1e")]/2);var t=new(THREE[_0xeeeb("0x33")])(x);return t[_0xeeeb("0x98")]=!0,t[_0xeeeb("0x34")]=THREE[_0xeeeb("0x35")],t},THREE=THREE||{};var ViewManager=function(){function e(){_classCallCheck(this,e),this[_0xeeeb("0x99")]=new(THREE[_0xeeeb("0x9a")]),this.scene[_0xeeeb("0x9b")]=new(THREE[_0xeeeb("0x9c")])(15790320),this[_0xeeeb("0x9d")]=[]}return _createClass(e,[{key:"init",value:function(){this[_0xeeeb("0x9e")](),this[_0xeeeb("0x9f")](),this.ambientLight(),this[_0xeeeb("0xa0")](),this.antialiasing(),window[_0xeeeb("0xa1")]("resize",this[_0xeeeb("0xa2")],!1)}},{key:_0xeeeb("0xa3"),value:function(e){return this[_0xeeeb("0x99")][_0xeeeb("0x6c")](e[_0xeeeb("0x82")]()),this}},{key:"renderer",value:function(){this.renderer=new THREE.WebGLRenderer,this[_0xeeeb("0x9f")].setSize(window[_0xeeeb("0x12")],window[_0xeeeb("0x13")]),this[_0xeeeb("0x9f")][_0xeeeb("0xa4")](window[_0xeeeb("0x8b")]||1),this.renderer[_0xeeeb("0xa5")][_0xeeeb("0xa6")]=!0,this[_0xeeeb("0x9f")][_0xeeeb("0xa5")][_0xeeeb("0xa7")]=THREE.PCFSoftShadowMap,this.renderer[_0xeeeb("0xa8")]=!0,this.renderer[_0xeeeb("0xa9")]=!0,this[_0xeeeb("0x9f")][_0xeeeb("0xaa")]=!0,this[_0xeeeb("0x9f")][_0xeeeb("0xab")]=2.2,this[_0xeeeb("0x9f")].autoClear=!1,this.renderer.shadowMapBias=.0039,this.renderer[_0xeeeb("0xac")]=.5,this[_0xeeeb("0x9f")].shadowMapWidth=1024,this.renderer[_0xeeeb("0xad")]=1024,this[_0xeeeb("0x17")]=new(THREE[_0xeeeb("0xae")])(this[_0xeeeb("0x9f")]),this[_0xeeeb("0x17")][_0xeeeb("0x18")](new(THREE[_0xeeeb("0xaf")])(this.scene,this[_0xeeeb("0xb0")])),document[_0xeeeb("0xb1")][_0xeeeb("0xb2")](this[_0xeeeb("0x9f")][_0xeeeb("0xb3")])}},{key:_0xeeeb("0xb4"),value:function(){var e=new(THREE[_0xeeeb("0xb5")])(THREE[_0xeeeb("0xb6")]),x=this.renderer[_0xeeeb("0xb7")](),b=e.material[_0xeeeb("0xb8")][_0xeeeb("0xb9")][_0xeeeb("0xd")];b.x=1/(window.innerWidth*x),b.y=1/(window[_0xeeeb("0x13")]*x),this[_0xeeeb("0x17")].addPass(e)}},{key:_0xeeeb("0xba"),value:function(){this.renderer[_0xeeeb("0xba")](this.scene,this[_0xeeeb("0xb0")]),this.composer[_0xeeeb("0xba")]()}},{key:_0xeeeb("0xbb"),value:function(){this[_0xeeeb("0xba")](),requestAnimationFrame(this[_0xeeeb("0xbb")].bind(this))}},{key:_0xeeeb("0x9e"),value:function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]&&arguments[0],x=new(THREE[_0xeeeb("0xbc")])(35,window.innerWidth/window[_0xeeeb("0x13")],1,2e3);if(x[_0xeeeb("0x70")][_0xeeeb("0x93")](0,700,500),x[_0xeeeb("0xbd")](),x[_0xeeeb("0xbe")](new(THREE[_0xeeeb("0xbf")])(0,0,0)),x[_0xeeeb("0xc0")]=35,x[_0xeeeb("0xc1")]=530,this.camera=x,e){var b=new THREE.PerspectiveCamera(65,window.innerWidth/window[_0xeeeb("0x13")],1,5e3);b.position.set(0,150,600),b[_0xeeeb("0xbd")](),this[_0xeeeb("0xb0")]=b,this[_0xeeeb("0x99")].add(x),this[_0xeeeb("0x99")][_0xeeeb("0x6c")](new(THREE[_0xeeeb("0xc2")])(x))}}},{key:_0xeeeb("0xc3"),value:function(){this.scene[_0xeeeb("0x6c")](new THREE.AmbientLight(16777215,.5))}},{key:_0xeeeb("0xc4"),value:function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]&&arguments[0],x=new(THREE[_0xeeeb("0xc5")])(11184810,1);x[_0xeeeb("0x70")][_0xeeeb("0x93")](0,500,100),x[_0xeeeb("0xc6")][_0xeeeb("0x70")].set(-5,0,0),x[_0xeeeb("0x71")]=!0,x[_0xeeeb("0xc7")]=.5,x[_0xeeeb("0xc8")]=!0,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xca")]=-300,x[_0xeeeb("0xc9")].camera[_0xeeeb("0x53")]=300,x.shadow[_0xeeeb("0xb0")][_0xeeeb("0xcb")]=300,x.shadow[_0xeeeb("0xb0")][_0xeeeb("0xcc")]=-300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcd")]=100,x.shadow.camera[_0xeeeb("0xc1")]=1630,this[_0xeeeb("0x99")][_0xeeeb("0x6c")](x),e&&this[_0xeeeb("0x99")].add(new(THREE[_0xeeeb("0xce")])(x))}},{key:_0xeeeb("0xcf"),value:function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]&&arguments[0],x=new(THREE[_0xeeeb("0xd0")])(15724527,.2,null,null,.5);x[_0xeeeb("0x70")][_0xeeeb("0x93")](0,500,-200),x[_0xeeeb("0x71")]=!0,x[_0xeeeb("0xc9")]=new THREE.LightShadow(new(THREE[_0xeeeb("0xbc")])(50,window[_0xeeeb("0x12")]/window[_0xeeeb("0x13")],700,2e3)),x[_0xeeeb("0xc9")][_0xeeeb("0xd1")]=1e-4,x.shadow[_0xeeeb("0xd2")][_0xeeeb("0x94")]=2048,x[_0xeeeb("0xc9")].mapSize[_0xeeeb("0x1e")]=2048,x[_0xeeeb("0xc7")]=.2,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")].left=-300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0x53")]=300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcb")]=300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcc")]=-300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcd")]=100,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xc1")]=1630,this[_0xeeeb("0x99")][_0xeeeb("0x6c")](x),e&&this.scene[_0xeeeb("0x6c")](new(THREE[_0xeeeb("0xc2")])(x[_0xeeeb("0xc9")][_0xeeeb("0xb0")]))}},{key:_0xeeeb("0xa0"),value:function(){var e=arguments[_0xeeeb("0x7")]>0&&void 0!==arguments[0]&&arguments[0],x=(new(THREE[_0xeeeb("0xd3")])(16777215,16777215,1),new THREE.DirectionalLight(16777215,1));x[_0xeeeb("0x70")][_0xeeeb("0x93")](500,500,500),x[_0xeeeb("0x71")]=!0,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xca")]=-300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0x53")]=300,x.shadow[_0xeeeb("0xb0")].top=300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcc")]=-300,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")][_0xeeeb("0xcd")]=100,x[_0xeeeb("0xc9")][_0xeeeb("0xb0")].far=1630,this[_0xeeeb("0x99")][_0xeeeb("0x6c")](x),e&&this[_0xeeeb("0x99")].add(new(THREE[_0xeeeb("0xce")])(x))}},{key:_0xeeeb("0xd4"),value:function(){this.scene[_0xeeeb("0xd5")]=new(THREE[_0xeeeb("0xd6")])(15790320,.002)}},{key:_0xeeeb("0xd7"),value:function(){var e=window[_0xeeeb("0x12")]*this[_0xeeeb("0x9f")][_0xeeeb("0xb7")](),x=window[_0xeeeb("0x13")]*this[_0xeeeb("0x9f")][_0xeeeb("0xb7")](),b=new THREE.EffectComposer(this[_0xeeeb("0x9f")]);b[_0xeeeb("0x18")](new(THREE[_0xeeeb("0xaf")])(this[_0xeeeb("0x99")],this[_0xeeeb("0xb0")])),b.addPass(new(THREE[_0xeeeb("0xd8")])(e,x))}},{key:_0xeeeb("0xd9"),value:function(){new(THREE[_0xeeeb("0xae")])(this[_0xeeeb("0x9f")]);var e=new(THREE[_0xeeeb("0xda")])(this.scene,this[_0xeeeb("0xb0")]),x=new(THREE[_0xeeeb("0xb5")])(THREE[_0xeeeb("0xdb")]);e.unbiased=!1,this.composer.addPass(e),this.composer[_0xeeeb("0x18")](x)}},{key:_0xeeeb("0xdc"),value:function(){var e=new THREE.SSAOPass(this.scene,this[_0xeeeb("0xb0")],window[_0xeeeb("0x94")],window[_0xeeeb("0x1e")]);e.kernelRadius=16,e[_0xeeeb("0xdd")]=.02,e.maxDistance=.15,this.composer[_0xeeeb("0x18")](e)}},{key:_0xeeeb("0xa2"),value:function(){this[_0xeeeb("0xb0")][_0xeeeb("0xde")]=window[_0xeeeb("0x12")]/window[_0xeeeb("0x13")],this[_0xeeeb("0xb0")][_0xeeeb("0xbd")](),this[_0xeeeb("0x9f")][_0xeeeb("0xdf")](window[_0xeeeb("0x12")],window.innerHeight)}},{key:"bloomEffect",value:function(){var e={exposure:1,bloomStrength:1.5,bloomThreshold:0,bloomRadius:0},x=new THREE.UnrealBloomPass(new THREE.Vector2(window[_0xeeeb("0x12")],window.innerHeight),1.5,.4,.85);x.threshold=e.bloomThreshold,x[_0xeeeb("0x15")]=e[_0xeeeb("0x16")],x[_0xeeeb("0xe0")]=e[_0xeeeb("0xe1")],this[_0xeeeb("0x17")][_0xeeeb("0x18")](new(THREE[_0xeeeb("0xaf")])(this.scene,this.camera)),this[_0xeeeb("0x17")].addPass(x)}},{key:_0xeeeb("0xe2"),value:function(){this[_0xeeeb("0xe3")]=new(THREE[_0xeeeb("0xe4")])(this[_0xeeeb("0xb0")])}},{key:_0xeeeb("0xe5"),value:function(){this[_0xeeeb("0xe5")]=new Stats,this[_0xeeeb("0xe5")][_0xeeeb("0xe6")](0),document[_0xeeeb("0xb1")][_0xeeeb("0xb2")](this[_0xeeeb("0xe5")].dom)}}],[{key:_0xeeeb("0xe7"),value:function(){for(var e=[],x=2;x<1e4;x*=2)e[x]=new THREE.MeshLambertMaterial({map:BrickView.text(x)});return e}},{key:_0xeeeb("0xe8"),value:function(){var e=new(THREEx[_0xeeeb("0xe9")]);e[_0xeeeb("0xb3")][_0xeeeb("0x22")].position=_0xeeeb("0xea"),e[_0xeeeb("0xb3")][_0xeeeb("0x22")][_0xeeeb("0xca")]=0,e[_0xeeeb("0xb3")][_0xeeeb("0x22")][_0xeeeb("0xcc")]=0,document.body.appendChild(e[_0xeeeb("0xb3")])}}]),e}();function Game(){this[_0xeeeb("0xeb")]=new ViewManager,this[_0xeeeb("0xec")]=new Score}Game[_0xeeeb("0x10")].init=function(){this[_0xeeeb("0xeb")].init(),window.scene=this.viewManager[_0xeeeb("0x99")];this.viewManager[_0xeeeb("0x99")],this.viewManager[_0xeeeb("0x9f")];var e=Board[_0xeeeb("0x58")](),x=new BoardView;new ScoreView;this.viewManager[_0xeeeb("0xa3")](new FloorView),this[_0xeeeb("0xeb")].addObject(x),x[_0xeeeb("0x78")](e[_0xeeeb("0x59")]()),this[_0xeeeb("0xeb")].animate(),document[_0xeeeb("0xa1")](_0xeeeb("0xed"),function(b){("j"===b[_0xeeeb("0xf")]||37===b.keyCode)&&e[_0xeeeb("0xca")](),("l"===b[_0xeeeb("0xf")]||39===b[_0xeeeb("0xee")])&&e.right(),("i"===b[_0xeeeb("0xf")]||38===b[_0xeeeb("0xee")])&&e.up(),("k"===b[_0xeeeb("0xf")]||40===b.keyCode)&&e[_0xeeeb("0x55")](),e[_0xeeeb("0x5f")](),e[_0xeeeb("0x7a")](),x[_0xeeeb("0x78")](e.bricks()),e[_0xeeeb("0xef")](),e[_0xeeeb("0x5b")]()&&console.log(_0xeeeb("0xf0"))})},Game[_0xeeeb("0x10")][_0xeeeb("0xe7")]=function(){for(var e=[],x=2;x<1e4;x*=2)e[x]=new(THREE[_0xeeeb("0x37")])({map:BrickView[_0xeeeb("0x91")](x)});return e},Game.prototype.config=function(){},window[_0xeeeb("0xf1")]=function(){window[_0xeeeb("0xf2")]=THREE,(new Game)[_0xeeeb("0xf3")]()};